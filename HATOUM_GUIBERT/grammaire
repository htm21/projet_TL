import sys
from main import Grammaire

def main():
    if len(sys.argv) != 2:
        print("Usage: python script.py <fichier_grammaire>")
        sys.exit(1)

    fichier_grammaire = sys.argv[1]

    try:
        # On choisi d'utiliser deux objets Grammaire diff√©rents (n'est pas obligatoire)
        grammaire_chomsky = Grammaire()
        grammaire_greibach = Grammaire()
        grammaire_chomsky.lire(fichier_grammaire)
        grammaire_greibach.lire(fichier_grammaire)

        grammaire_chomsky.transformation_chomsky()
        filepath1 = fichier_grammaire.split("/")[-1].split(".")[:-1][0] + ".chomsky"
        grammaire_chomsky.ecrire(filepath1)

        grammaire_greibach.transformation_greibach()
        filepath2 = fichier_grammaire.split("/")[-1].split(".")[:-1][0] + ".greibach"
        grammaire_greibach.ecrire(filepath2)

    except FileNotFoundError:
        print(f"Erreur : le fichier '{fichier_grammaire}' est introuvable.")
        sys.exit(1)
    except Exception as e:
        print(f"Une erreur est survenue : {e}")
        sys.exit(1)

if __name__ == "__main__":
    main()
